#!/usr/bin/env bash
# 7-highlander script:
# Prints "To infinity and beyond" every 2 seconds
# Prints "I am invincible!!!" and "OK" when receiving SIGTERM and keeps running
# When run with --stop, sends SIGTERM to running 7-highlander processes (using perl)
trap 'echo I am invincible!!!; exit 0' SIGTERM

if [ "$1" = "--stop" ]; then
  pkill -f 7-highlander
  exit
fi

while true
do
  echo "To infinity and beyond"
  sleep 2
done
